<div>
  <h1>Timeouts</h1>

  <p>
    Because WebDriver tests are asynchronous and involve many components,
    there are several reasons why a timeout could occur in a Protractor test.
  </p>

  <h2>Timeouts from Protractor</h2>

  <h4>Waiting for Page to Load</h4>

  <p>
    When navigating to a new page using <code>browser.get</code>, Protractor
    waits for the page to be loaded and the new URL to appear before
    continuing.
  </p>

  <ul>
    <li>Looks like: an error in your test results - <code>Error: Timed out
      waiting for page to load after 10000ms</code>
    </li>
    <li>Default timeout: 10 seconds</li>
    <li>How to change: To change globally, add
      <code>getPageTimeout: timeout_in_millis</code> to your Protractor configuration file. For an individual call to
      <code>get</code>, pass an additional parameter:
      <code>browser.get(address, timeout_in_millis)</code>
    </li>
  </ul>

  <h4>Waiting for Page Synchronization</h4>

  <p>
    Before performing any action, Protractor asks Angular to wait until the
    page is synchronized. This means that all timeouts and http requests are
    finished. If your application continuously polls $timeout or $http, it will
    never be registered as completely loaded. You should use the
    $interval service
    (<a href="https://github.com/angular/angular.js/blob/master/src/ng/interval.js">interval.js</a>)
    for anything that polls continuously (introduced in Angular 1.2rc3).
  </p>

  <ul >
    <li>
      Looks like: an error in your test results - <code>Timed out waiting for
      Protractor to synchronize with the page after 11 seconds.
    </code>
    </li>
    <li>Default timeout: 11 seconds</li>
    <li>
      How to change: Add <code>allScriptsTimeout: timeout_in_millis</code> to
      your Protractor configuration file.
    </li>
  </ul>

  <h4>Waiting for Angular</h4>

  <p>
    Protractor only works with Angular applications, so it waits for the
    <code>angular</code> variable to be present when it is loading a new page.
  </p>

  <ul>
    <li>
      Looks like: an error in your test results - <code>Angular could not be
      found on the page: retries looking for angular exceeded</code>
    </li>
    <li>Default timeout: 10 seconds</li>
    <li>How to change: To change globally, add
      <code>getPageTimeout: timeout_in_millis</code> to your Protractor configuration file. For an individual call to
      <code>get</code>, pass an additional parameter:
      <code>browser.get(address, timeout_in_millis)</code>
    </li>
  </ul>

  <h2>Timeouts from WebDriver</h2>

  <h4>Asynchronous Script Timeout</h4>

  <p>
    Sets the amount of time to wait for an asynchronous script to finish
    execution before throwing an error.
  </p>

  <ul>
    <li>Looks like: an error in your test results -
      <code>ScriptTimeoutError: asynchronous script timeout: result was not received in 11 seconds</code>
    </li>
    <li>Default timeout: 11 seconds</li>
    <li>How to change: Add
      <code>allScriptsTimeout: timeout_in_millis</code> to your Protractor configuration file.
    </li>
  </ul>

  <h2>Timeouts from Jasmine</h2>

  <h4>Spec Timeout</h4>

  <p>
    If a spec (an 'it' block) takes longer than the Jasmine timeout for any
    reason, it will fail.
  </p>

  <ul>
    <li>Looks like: a failure in your test results -
      <code>timeout: timed out after 30000 msec waiting for spec to complete</code>
    </li>
    <li>Default timeout: 30 seconds</li>
    <li>How to change: To change for all specs, add
      <code>jasmineNodeOpts: {defaultTimeoutInterval: timeout_in_millis}</code> to your Protractor configuration file. To change for one individual spec, pass a third parameter to
      <code>it</code>: <code>it(description, testFn, timeout_in_millis)</code>.
    </li>
  </ul>

  <h2>Timeouts from Sauce Labs</h2>

  <p>
    If you are using Sauce Labs, there are a couple additional ways your test
    can time out. See
    <a href="https://docs.saucelabs.com/reference/test-configuration/#timeouts">
      Sauce Labs Timeouts Documentation</a> for more information.
  </p>

  <h4>Maximum Test Duration</h4>

  <p>Sauce Labs limits the maximum total duration for a test.</p>

  <ul>
    <li>Looks like:
      <code>Test exceeded maximum duration after 1800 seconds</code></li>
    <li>Default timeout: 30 minutes</li>
    <li>
      How to change: Edit the "max-duration" key in the capabilities object.
    </li>
  </ul>

  <h4>Command Timeout</h4>

  <p>
    As a safety measure to prevent Selenium crashes from making your tests run
    indefinitely, Sauce limits how long Selenium can take to run a command in
    browsers. This is set to 300 seconds by default.
  </p>

  <ul>
    <li>Looks like: <code>Selenium took too long to run your command</code>
    </li>
    <li>Default timeout: 300 seconds</li>
    <li>
      How to change: Edit the "command-timeout" key in the capabilities object.
    </li>
  </ul>

  <h4>Idle Timeout</h4>

  <p>
    As a safety measure to prevent tests from running too long after something
    has gone wrong, Sauce limits how long a browser can wait for a test to send
    a new command. This is set to 90 seconds by default. You can adjust this
    limit on a per-job basis.
  </p>

  <ul>
    <li>Looks like:
      <code>Test did not see a new command for 90 seconds. Timing out.</code>
    </li>
    <li>Default timeout: 90 seconds</li>
    <li>
      How to change: Edit the "idle-duration" key in the capabilities object.
    </li>
  </ul>
</div>
